<html>
  <head>
    
  <title>Nebraska basketball NCAA tournament odds</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="A machine that calculates how close Nebrasketball is to the Big Dance. Updated every 60 minutes."/>


  <meta name="twitter:card" content="summary" />
  <meta name="twitter:creator" content="@bvankat" />
  <meta property="og:url" content="https://bvankat.github.io/nebrasketball" />
  <meta property="og:title" content="Nebraska basketball NCAA tournament odds" />
  <meta property="og:description" content="A machine that calculates how close Nebrasketball is to the Big Dance. Updated every 60 minutes." />
  <meta property="og:image" content="http://benvankat.com/projects/nebrasketball/tourney-gauge.jpg" />


  <link rel="apple-touch-icon" href="http://benvankat.com/projects/nebrasketball/app-icon.png">
  <link rel="stylesheet" href="https://use.typekit.net/dhj5kzf.css">

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

   	
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

	
	<script type="text/javascript" src="data.js"></script>


	<style>
	    body { font-family: "avory-i-latin", sans-serif; border-left: 20px solid #fff; background: #c10000 url(white-grunge.png) top left; font-variant-ligatures: no-common-ligatures; }
   	    div.jumbotron { color: #fff; background: #c10000 url(white-grunge.png)top left; border-radius: 0; border-top: 25px solid #fff; }

	    
 	    h2 { font-family: "avory-i-latin", sans-serif; text-transform: uppercase; letter-spacing: .75em; font-size: 100%; color: #000; font-variant-ligatures: no-common-ligatures; float: left; margin: 0 0 50px 0; }
 	    h3 { font-family: "korolev-condensed", sans-serif; font-size: 20em; font-weight: bold; line-height: 1; z-index: 10; padding-left: 40px; }
 	    h4 { font-family: "avory-i-latin", sans-serif; font-weight: normal; letter-spacing: 10px; text-transform: uppercase; color: #000; font-size: 1.25em; padding: 40px 0 40px 20px; }
 	    h5 { font-family: "avory-i-latin", sans-serif; font-weight: bold; font-size: 1em; color: #000; }
 	    span.percent { font-size: 50px; opacity: 0.3; }
 	    .rating-number { font-family: "korolev-condensed", sans-serif; color: #fff; font-size: 3em; }
 	    
	    .gray {color: #ddd; }
	    .red { color: #c10000; }
	    div.white { background: #fff url(white-grunge.png) bottom left; padding: 3em; }
	    p.white { color: #fff; }
	    .paint { margin: -250px 0 0 -60px; z-index: 0; }
	    th { text-align: left; }
	    .r { text-align: right; }
	    .alert { margin-bottom: 0; }
	    .player { width: 500px; float: left; margin-left: 50px; top: -50;}
	    .fira { font-family: "fira-mono", monospace; }
	    
	</style>


		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2657483-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		
		  gtag('config', 'UA-2657483-1');
		</script>

    
    
  </head>
  <body>
	  
	  	<div class="white">
  		<div class="container">
	  			  <div class="col-sm-8">
		  			  <h2><b>Nebraska basketball</b><br />NCAA tournament odds</h2>
		  		 <div class="col-sm-4">
		  			  <img src="palmer.png" class="player" />
		  		 </div>
  		</div>
	  	</div>


	  	<div class="jumbotron">
	  	<div class="container">
	  	
	  

	  <div class="row">
		  	  
		  		
		  		<h3>56<span class="percent">%</span></h3>
		  		<!-- <div id="chart_div" style="width: 350px; height: 350px; margin: 0 auto 40px auto; clear: both;"></div> -->
		  		
		  		<img src="paint-smear.png" class="paint" /> 		

    
		  </div>
		  
		  <div class="row">
			  <h4>Selection committee metrics</h4>
		  </div>
		  
		  <div class="row">
			  
			  <div class="rating col-sm-2">
				  <h5>RPI</h5>
				  <p class="rating-number" id="ncaa-rating">50</p>
			  </div>
			  
			  <div class="rating col-sm-2">
				  <h5>SOR</h5>
				  <p class="rating-number" id="espn-sor">50</p>
			  </div> 
			  
			   <div class="rating col-sm-2">
				  <h5>KENPOM</h5>
				  <p class="rating-number" id="kenpom-rating">50</p>
			  </div>
			  
			   <div class="rating col-sm-2">
				  <h5>KPI</h5>
				  <p class="rating-number" id="trank-kpi">50</p>
			  </div>
			  
			   <div class="rating col-sm-2">
				  <h5>BPI</h5>
				  <p class="rating-number" id="espn-rating">50</p>
			  </div>  	
			    	
			  
			  
			  
		  </div>

  	</div>
	  	</div>
		
		<div class="container">  
		  
		  <div class="row">
			  
		  <div class="col-sm-8">
			  
	    	    	
		    	<h4>RPI details</h4>
		
						<p>Group 1</p>
						<p class="group-record" id="warrennolan-group1"></p>
						<p>Group 2</p>
						<p class="group-record" id="warrennolan-group2"></p>
						<p>Group 3</p>
						<p class="group-record" id="warrennolan-group3"></p>
						<p>Group 4</p>
						<p class="group-record" id="warrennolan-group4"></p>
						
			</div>				
			
			
			<div class="col-sm-4">
				
				<table class="table">
				<tbody>
					<tr>
						<td>Bracket Project: How many brackets have NU?</td>
						<td class="r"><span id="bracketproject-count"></span>/84</td>
					</tr>
					<tr>
						<td>ESPN Joe Lunardi: Where's NU?</td>
						<td class="r">(Unlisted)</td>
					</tr>
				
				</tbody>
			</table>

				
			</div>
			
		  </div><!-- row --> 


		
		<div class="row">
		<br /><br /><br />	
		  	
  		<p class="small fira white"><b>Last update</b>: <span id="time">March 11, 9:45 p.m.</span> * Updated every 60 minutes *
	  		
  		<br /><b>Details</b>: <a href="http://github.com/bvankat/nebrasketball">Github</a> / Inspiration: <a href="https://www.nytimes.com/2017/12/14/reader-center/nyt-needle-election.html">#nytneedle</a>
  		
  		<br /><b>Sources</b>: <a href="http://www.espn.com/mens-college-basketball/bpi/_/view/resume/group/7">ESPN 1</a>, <a href="http://www.espn.com/mens-college-basketball/bracketology">ESPN 2</a>, <a href="https://kenpom.com/">Kenpom</a>, <a href="http://www.ncaa.com/rankings/basketball-men/d1/ncaa-mens-basketball-rpi">NCAA</a>, <a href="https://www.teamrankings.com/ncaa-basketball/team/nebraska-cornhuskers/bracketology">TeamRankings</a>, <a href="http://warrennolan.com/basketball/2018/rpi-live">Warren Nolan</a>, <a href="http://barttorvik.com/team.php?team=Nebraska">T-Rank</a>, <a href="http://www.kpisports.net/d-i_mbb/2018kpi-d1mbb/">KPI</a>, <a href="http://sagarin.com/sports/cbsend.htm">Sagarin</a>, <a href="https://www2.isye.gatech.edu/~jsokol/lrmc/">LRMC</a>, <a href="http://bracketmatrix.com">Bracket Project</a>, <a href="https://www.masseyratings.com/cb/compare.htm">Massey Ratings</a>, <a href="https://www.cbssports.com/college-basketball/bracketology/">CBS Sports</a>
  		
  		<br /><b>Calculations help</b>: <a href="https://fivethirtyeight.com/features/on-the-ncaa-bubble-heres-the-number-to-watch/">1</a>, <a href="http://thesportsdaily.com/ncaa/analyzing-the-rpi-for-at-large-teams-2/">2</a>, <a href="http://www.kpisports.net/2017/03/14/comparing-advanced-metrics-to-ncaa-1-68-seed-list-2017-edition/">3</a>
  		
  		<br /><b>Shout out</b>: <a href="http://brianhelge.com">Brian H.</a></p>
  	
  	</div><!-- row -->
  	
  </div><!-- container -->
  	
  	</body>
 
 
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
 	
  	<script>
	  	
	  	var total_score;
	  	
	  	
		$.getJSON( "data.js", function( json ) {
			console.log(json);

			$('#kenpom-rating').text(json.kenpom.rating);
			$('#ncaa-rating').text(json.warrennolan.rpi); // Using live one rather than json.ncaa.rpi_rank for more frequent updates
			$('#espn-rating').text(json.espn.bpi);
			$('#teamrankings-rating').text(json.teamrankings.rank);
			$('#massey-comp').text(json.massey.composite);
			
			$('#kenpom-sos').text(json.kenpom.sos);
			$('#espn-sos').text(json.espn.sos);
			$('#teamrankings-sos').text(json.teamrankings.sos)
			
			$('#espn-proj-tourney-seed').text(json.espn.proj_tourney_seed);
			$('#espn-wl').text(json.espn.proj_win_loss_overall);
			$('#espn-cwl').text(json.espn.proj_win_loss_conf);
			$('#espn-sor').text(json.espn.sor);
			
			$('#teamrankings-make-tourney').text(json.teamrankings.make_tournament);
			$('#teamrankings-seed').text(json.teamrankings.most_likely_seed);

			$('#warrennolan-rpi').text(json.warrennolan.rpi);
			$('#warrennolan-sos, #warrennolan-sos2').text(json.warrennolan.sos);
			$('#warrennolan-group1').text(json.warrennolan.group1);
			$('#warrennolan-group2').text(json.warrennolan.group2);
			$('#warrennolan-group3').text(json.warrennolan.group3);
			$('#warrennolan-group4').text(json.warrennolan.group4);
			$('#warrennolan-wl').text(json.warrennolan.wl);
			$('#warrennolan-cwl').text(json.warrennolan.cwl);
			
			$('#trank-proj').text(json.trank.proj);
			$('#trank-sagarin').text(json.trank.sagarin);
			$('#trank-trank').text(json.trank.trank);
			$('#trank-kpi').text(json.trank.kpi);
			$('#trank-current-wl').text(json.trank.current_wl);
			$('#trank-current-cwl').text(json.trank.current_cwl);

			$('#lrmc-rank').text(json.lrmc.rank);
			
			$('#bracketproject-count').text(json.bracketproject.matrix_count);
			
			var teamrankings_wl = json.teamrankings.projected_wins + "-" + json.teamrankings.projected_losses
			$('#teamrankings_wl').text(teamrankings_wl);
			
			// $('#time').text(json.time.time);
			
			if (json.todays_games) {	
				games = json.todays_games;
				console.log(games.length + " bubble games today:");
				console.log(games);
			
				$.each(games, function(i, game){
					$('#todays-games').append("<tr><td>" + game.team + " (" + game.rpi + ") " + game.next_opponent + ", " + game.time + "</td></tr>");
				});
			
			} else {
				$('#todays-games').append("<tr><td>No bubble games left today</td></tr>");
			};
			
			
			gauge_number = json.teamrankings.make_tournament	
			
			function FindScore(data) { // Calculate percentage chance based on RPI-like ranking system
				 var score;
				 if (data < 30){ score = 99; }
				 if (data > 30 && data <= 40) { score = 92; }
				 if (data > 40 && data <= 43) { score = 85; }
				 if (data > 43 && data <= 45) { score = 80; }
				 if (data > 45 && data <= 47) { score = 55; }
				 if (data > 47 && data <= 51) { score = 35; }
				 if (data > 51 && data <= 55) { score = 25; }
				 if (data > 55 && data <= 60) { score = 15; }
				 if (data > 60 && data <= 70) { score = 5; }
				 if (data > 70 && data <= 80) { score = 2; }
				 if (data > 80) { score = 1; }
				 
				 return score;
			 };
			 

			 
			 kenpom_score = FindScore(json.kenpom.rating);
			 ncaa_score = FindScore(json.warrennolan.rpi); // Using live one rather than json.ncaa.rpi_rank for more frequent updates
			 espn_sor = FindScore(parseInt(json.espn.sor)); // SOR is stronger predictor than BPI
			 espn_bpi = FindScore(parseInt(json.espn.bpi)); 
			 teamrankings_score = parseInt(json.teamrankings.make_tournament); // This one's already a % score
			 sagarin_score = FindScore(json.trank.sagarin);
			 trank_score = FindScore(json.trank.trank);
			 kpi_score = FindScore(json.trank.kpi);
			 lrmc_score = FindScore(json.lrmc.rank);
			 massey_score = FindScore(json.massey.composite);
			 
			 total_score = ((kenpom_score*.14) + (ncaa_score*.18) + (espn_sor*.15) + (espn_bpi*.10) + (teamrankings_score*.06) + (sagarin_score*.04) + (trank_score*.08) + (kpi_score*.13) + (lrmc_score * .03) + (massey_score * .09));
			 
			 
			 
			 function StatusCheck(data) {
				 var status_message;
				 if (data < 25) { status_message = "NIT bound." }
				 if (data >= 25 && data < 35) { status_message = "Probably not happening, but we're still watching the selection show." }
				 if (data >= 35 && data < 45) { status_message = "Ignoring everything but the eye test." }
				 if (data >= 45 && data < 55) { status_message = "Forever nervous." }
				 if (data >= 55 && data < 75) { status_message = "Feeling good." }
				 if (data >= 75) { status_message = "Dancing." }
				 
				 return status_message;
				 
			 }
			 
			 message = StatusCheck(total_score);
			 console.log(message);

			//  $('#message').text(message);

			 
			 
			 console.log("NCAA score: " + ncaa_score + "    (18%)");
			 console.log("ESPN SOR score: " + espn_sor + "    (15%)");
			 console.log("Kenpom score: " + kenpom_score + "    (14%)");
			 console.log("KPI score: " + kpi_score + "    (13%)");
			 console.log("ESPN BPI score: " + espn_bpi + "    (10%)");
			 console.log("Massey score: " + massey_score + "    (9%)");
			 console.log("T-Rank score: " + trank_score + "    (8%)");
			 console.log("TeamRankings score: " + teamrankings_score + "    (6%)");
			 console.log("Sagarin score: " + sagarin_score + "    (4%)");
			 console.log("LRMC score: " + lrmc_score + "    (3%)");
			 console.log("Total score: " + total_score);

			});		

				
			 google.charts.load('current', {'packages':['gauge']});
			 google.charts.setOnLoadCallback(drawChart);

			 
			 
		
			 
	   function drawChart() {
				      total_score = parseInt(total_score);

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['', total_score],
        ]);

        var options = {
          width: 350, height: 350,
          redFrom: 75, redTo: 100,
          yellowFrom:50, yellowTo: 75,
          minorTicks: 10
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));


        chart.draw(data, options);

        setInterval(function() {
          data.setValue(0, 1, total_score-3 + Math.round(6 * Math.random()));
          chart.draw(data, options);
        }, 300);
     
     
      };
      
				
    </script>
  
  
</html>