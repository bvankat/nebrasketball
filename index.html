<html>
  <head>
    
  <title>Nebrasketball NCAA tournament odds tracker</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="A machine that calculates how close Nebrasketball is to the Big Dance. Updated every 30 minutes."/>


   	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	
	<script type="text/javascript" src="data.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


	<style>
	    body { font-family: sans-serif; }
	    h1 { font-weight: bold; margin-bottom: 40px; text-align: center;}
	    div.jumbotron { color: #fff; background-color: #e21d38; border-radius: 0; }
	    
	</style>


		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2657483-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		
		  gtag('config', 'UA-2657483-1');
		</script>

    
    
  </head>
  <body>
	  
	  	<div class="jumbotron">
	  	<div class="container">
	  	
	  
	  <h1>Nebraska basketball NCAA tournament odds</h1>
	  
	  <div class="row">
		  	  
		  		<div id="chart_div" style="width: 350px; height: 350px; margin: 0 auto 40px auto; clear: both;"></div>
		  		
		  		<p class="col-sm-12 text-center small">Updated: <span id="time"></span></p>

    
		  </div>

  	</div>
	  	</div>
		
		<div class="container">  
		  
		  <div class="row">
			  
		  <div class="col-sm-12">
			  
	    
	    	<table class="table">
		    	<thead>
			    	<tr>
				    	<th>Service</th>
				    	<th>Current rating</th>
				    	<th>Strength of schedule</th>
			    	</tr>
		    	</thead>
		    	
		    	<tbody>
			    	<tr><td>Kenpom</td><td id="kenpom-rating"></td><td id="kenpom-sos"></td></tr>
			    	<tr><td>NCAA RPI</td><td id="ncaa-rating"></td><td id="ncaa-sos"></td></tr>
			    	<tr><td>ESPN BPI</td><td id="espn-rating"></td><td id="espn-sos"></td></tr>
			    	<tr><td>TeamRankings.com</td><td id="teamrankings-rating"></td><td id="teamrankings-sos"></td></tr>
		    	</tbody>
	    	</table>
	    	
	    	<br /><br />
	    	
	    	<table class="table small">
		    	<thead>
			    	<tr>
				    	<th></th>
				    	<th>Projected seed</th>
						<th>Projected W-L</th>
						<th>Strength of record rank</th>
			    	</tr>
		    	</thead>
		    	<tbody>
			    	<tr><td>ESPN</td><td>#<span id="espn-proj-tourney-seed"></span></td><td><span id="espn-wl"></span> (<span id="espn-cwl"></span>)</td><td id="espn-sor"></td></tr>
				    <tr><td>TeamRankings.com</td><td id="teamrankings-seed"></td><td id="teamrankings_wl"></td><td></td></tr>
				</tbody>
			</table>
			
			
			
	    	
	    </div>
  	</div>
  	
  		<br /><br /><br />
  		<p class="small text-muted text-center">Details: <a href="http://github.com/bvankat/nebrasketball">Github</a> / Sources: <a href="http://www.espn.com/mens-college-basketball/bpi/_/view/resume/group/7">ESPN</a>, <a href="https://kenpom.com/">Kenpom</a>, <a href="http://www.ncaa.com/rankings/basketball-men/d1/ncaa-mens-basketball-rpi">NCAA</a>, <a href="https://www.teamrankings.com/ncaa-basketball/team/nebraska-cornhuskers/rankings">TeamRankings</a> / Info: <a href="https://fivethirtyeight.com/features/on-the-ncaa-bubble-heres-the-number-to-watch/">1</a>, <a href="http://thesportsdaily.com/ncaa/analyzing-the-rpi-for-at-large-teams-2/">2</a></p>
  	
  	</div>
  	
  	</body>
 
 
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
 	
  	<script>
	  	
	  	var total_score;
	  	
	  	
		$.getJSON( "data.js", function( json ) {
			console.log(json);

			$('#kenpom-rating').text(json.kenpom.rating);
			$('#ncaa-rating').text(json.ncaa.rpi_rank);
			$('#espn-rating').text(json.espn.bpi);
			$('#teamrankings-rating').text(json.teamrankings.rank);
			
			$('#kenpom-sos').text(json.kenpom.sos);
			$('#espn-sos').text(json.espn.sos);
			$('#teamrankings-sos').text(json.teamrankings.sos)
			
			$('#espn-proj-tourney-seed').text(json.espn.proj_tourney_seed);
			$('#espn-wl').text(json.espn.proj_win_loss_overall);
			$('#espn-cwl').text(json.espn.proj_win_loss_conf);
			$('#espn-sor').text(json.espn.sor);
			console.log("SOR: " + json.espn.sor);
			
			$('#teamrankings-make-tourney').text(json.teamrankings.make_tournament);
			$('#teamrankings-seed').text(json.teamrankings.most_likely_seed);
			
			var teamrankings_wl = json.teamrankings.projected_wins + "-" + json.teamrankings.projected_losses
			$('#teamrankings_wl').text(teamrankings_wl);
			
			$('#time').text(json.time.time);				
			
			
			gauge_number = json.teamrankings.make_tournament	
			
			function FindScore(data) {
				 var score;
				 if (data < 30){ score = 99; }
				 if (data > 30 && data <= 40) { score = 92; }
				 if (data > 40 && data <= 43) { score = 85; }
				 if (data > 43 && data <= 47) { score = 80; }
				 if (data > 47 && data <= 51) { score = 45; }
				 if (data > 51 && data <= 55) { score = 25; }
				 if (data > 55 && data <= 60) { score = 15; }
				 if (data > 60 && data <= 70) { score = 10; }
				 if (data > 70 && data <= 80) { score = 5; }
				 if (data > 80) { score = 1; }
				 
				 return score;
			 };
			 
			 kenpom_score = FindScore(json.kenpom.rating);
			 ncaa_score = FindScore(json.ncaa.rpi_rank);
			 espn_score = FindScore(parseInt(json.espn.sor));
			 teamrankings_score = parseInt(json.teamrankings.make_tournament);
			 
			 total_score = ((kenpom_score*.22) + (ncaa_score*.35) + (espn_score*.32) + (teamrankings_score*.21))/4
			 
			 
			 
			 console.log("Kenpom score: " + kenpom_score);
			 console.log("NCAA score: " + ncaa_score);
			 console.log("ESPN score: " + espn_score);
			 console.log("TeamRankings score: " + teamrankings_score);
			 console.log("Total score: " + total_score);

			});		

				
			 google.charts.load('current', {'packages':['gauge']});
			 google.charts.setOnLoadCallback(drawChart);

			 
			 
		
			 
	   function drawChart() {
				      total_score = parseInt(total_score);

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['', total_score],
        ]);

        var options = {
          width: 350, height: 350,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

        chart.draw(data, options);

        setInterval(function() {
          data.setValue(0, 1, total_score-1 + Math.round(6 * Math.random()));
          chart.draw(data, options);
        }, 300);

     
      };
      
				
    </script>
  
  
</html>